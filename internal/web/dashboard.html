<!DOCTYPE html>
<html>
<head>
    <title>Web3 Indexer Dashboard</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/dashboard.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸš€ Web3 Indexer Dashboard</h1>
            <p class="header-subtitle">Real-time blockchain indexing with Go | Industrial Grade Architecture</p>
        </header>

        <div class="grid">
            <div class="card">
                <h2>ðŸ“Š System Status</h2>
                <div class="stat">
                    <span class="stat-label">System State</span>
                    <span class="stat-value" id="state">
                        <span class="status-connecting">INITIALIZING...</span>
                    </span>
                </div>
                <div class="stat">
                    <span class="stat-label">Latest (on Chain)</span>
                    <span class="stat-value" id="latestBlock">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Total (Synced)</span>
                    <span class="stat-value" id="totalBlocks">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Total Transfers</span>
                    <span class="stat-value" id="totalTransfers">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Real-time TPS</span>
                    <span class="stat-value" id="tps" style="color: #ff9800; font-weight: bold;">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Processing Speed (BPS)</span>
                    <span class="stat-value" id="bps" style="color: #9c27b0;">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">E2E Latency</span>
                    <span class="stat-value" id="latency" style="color: #e91e63; font-weight: bold;">0ms</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Sync Lag (Missing)</span>
                    <span class="stat-value" id="syncLag" style="color: #667eea;">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Self-Healing</span>
                    <span class="stat-value" id="selfHealing" style="color: #28a745;">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Health</span>
                    <span id="health" class="status-badge status-warning">Checking...</span>
                </div>
                <div class="refresh-time">Last updated: <span id="lastUpdate">-</span></div>
            </div>

            <div class="card" style="flex: 1; background: #1e1e1e; color: #d4d4d4; font-family: 'Courier New', monospace; max-height: 300px; overflow-y: auto; border: 1px solid #333;">
                <h2 style="color: #fff; border-bottom: 1px solid #333; padding-bottom: 5px; font-size: 16px; margin-top: 0;">ðŸ“œ Engine Logs</h2>
                <div id="logEntries" style="font-size: 11px; line-height: 1.4;">
                    <div style="color: #666;">> System standby...</div>
                </div>
            </div>

            <div class="card" style="flex: 1;">
                <h2>ðŸ”— API Endpoints</h2>
                <p style="color: #666; font-size: 13px; margin-bottom: 15px;">Access detailed information via REST API</p>
                <div style="display: flex; flex-direction: column; gap: 8px;">
                    <a href="/healthz" style="color: #667eea; text-decoration: none; font-size: 13px;">â†’ Health Check (/healthz)</a>
                    <a href="/metrics" style="color: #667eea; text-decoration: none; font-size: 13px;">â†’ Prometheus Metrics (/metrics)</a>
                    <a href="/api/status" style="color: #667eea; text-decoration: none; font-size: 13px;">â†’ System Status (/api/status)</a>
                    <a href="/api/blocks" style="color: #667eea; text-decoration: none; font-size: 13px;">â†’ Latest Blocks (/api/blocks)</a>
                    <a href="/api/transfers" style="color: #667eea; text-decoration: none; font-size: 13px;">â†’ Latest Transfers (/api/transfers)</a>
                </div>
                <button class="action-btn" onclick="location.href='/api/admin/start-demo'">ðŸŽ® Start Demo Mode</button>
            </div>
        </div>

        <div class="card">
            <h2>ðŸ“¦ Latest Blocks</h2>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Block #</th>
                        <th>Hash</th>
                        <th>Parent Hash</th>
                        <th>Timestamp</th>
                    </tr>
                </thead>
                <tbody id="blocksTable">
                    <tr><td colspan="4" class="loading">Waiting for sync...</td></tr>
                </tbody>
            </table>
        </div>

        <div class="card">
            <h2>ðŸ’¸ Latest Transfers</h2>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Block</th>
                        <th>From</th>
                        <th>To</th>
                        <th>Amount</th>
                        <th>Token</th>
                    </tr>
                </thead>
                <tbody id="transfersTable">
                    <tr><td colspan="5" class="loading">No transactions found...</td></tr>
                </tbody>
            </table>
        </div>
    </div>
    <script src="/static/dashboard.js"></script>
</body>
</html>