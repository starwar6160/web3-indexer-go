# ğŸ¨ Grafana Dashboard å¯¼å…¥å®Œæ•´æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆ3 æ­¥ï¼Œ10 åˆ†é’Ÿï¼‰

### Step 1: è®¿é—® Grafana

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š
```
http://localhost:3000
```

**ç™»å½•ä¿¡æ¯**:
- ç”¨æˆ·å: `admin`
- å¯†ç : `admin`ï¼ˆé¦–æ¬¡ç™»å½•åä¼šæç¤ºä¿®æ”¹ï¼‰

---

### Step 2: é…ç½® Prometheus æ•°æ®æº

**å¦‚æœå·²æœ‰ Prometheus æ•°æ®æºï¼Œè·³è¿‡æ­¤æ­¥éª¤**

1. ç‚¹å‡»å·¦ä¾§èœå• **"Configuration"** (âš™ï¸ å›¾æ ‡) â†’ **"Data sources"**

2. ç‚¹å‡» **"Add data source"**

3. æœç´¢å¹¶é€‰æ‹© **"Prometheus"**

4. å¡«å†™é…ç½®ï¼š
   ```
   Name: Prometheus
   URL: http://prometheus:9090
   ```

5. ç‚¹å‡»åº•éƒ¨ **"Save & Test"**

6. ç¡®è®¤æ˜¾ç¤º **"Data source is working"** (ç»¿è‰²)

---

### Step 3: å¯¼å…¥ Token Metrics Dashboard

#### æ–¹æ³• A: ä¸Šä¼ æ–‡ä»¶ï¼ˆæ¨èï¼‰

1. ç‚¹å‡»å·¦ä¾§èœå• **"Dashboards"** â†’ **"Import"**

2. ç‚¹å‡» **"Upload JSON file"**

3. é€‰æ‹©æ–‡ä»¶ï¼š
   ```
   /home/ubuntu/zwCode/web3-indexer-go/grafana/Token-Metrics-Dashboard.json
   ```

4. é€‰æ‹©æ•°æ®æºï¼š**"Prometheus"**

5. ç‚¹å‡» **"Import"**

#### æ–¹æ³• B: å¤åˆ¶ç²˜è´´ï¼ˆå¤‡é€‰ï¼‰

1. å¤åˆ¶ JSON æ–‡ä»¶å†…å®¹ï¼š
   ```bash
   cat /home/ubuntu/zwCode/web3-indexer-go/grafana/Token-Metrics-Dashboard.json
   ```

2. åœ¨ Grafana Import é¡µé¢ï¼Œç‚¹å‡» **"Paste or drag JSON here"**

3. ç²˜è´´ JSON å†…å®¹

4. ç‚¹å‡» **"Load"**

5. é€‰æ‹© **"Prometheus"** æ•°æ®æº

6. ç‚¹å‡» **"Import"**

---

## âœ… éªŒè¯å¯¼å…¥æˆåŠŸ

### æ£€æŸ¥æ¸…å•

å¯¼å…¥åï¼Œä½ åº”è¯¥çœ‹åˆ°ï¼š

#### Dashboard æ ‡é¢˜
```
Web3 Token Metrics Dashboard
```

#### é¢æ¿å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USDC è¿‡å» 1 å°æ—¶æµæ°´  â”‚  è¿‡å» 1 å°æ—¶æ€»è½¬è´¦æ•°              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  24 å°æ—¶ä»£å¸è½¬è´¦è¶‹åŠ¿     â”‚  å››å¤§çƒ­é—¨ä»£å¸è½¬è´¦æ¬¡æ•°å æ¯”      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å®æ—¶è½¬è´¦é€Ÿç‡ï¼ˆTPSï¼‰     â”‚  ğŸ›¡ï¸ RPC QUOTA GUARD (DAILY)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  24 å°æ—¶ä»£å¸æ´»åŠ¨è¯¦ç»†ç»Ÿè®¡                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ç«‹å³å¯è§çš„é¢æ¿
- **é¢æ¿ 6**: RPC é¢åº¦ä»ªè¡¨ç›˜
  - åº”è¯¥æ˜¾ç¤º: `0.016%` æˆ–ç±»ä¼¼çš„å°æ•°å€¼
  - é¢œè‰²: ç»¿è‰²ï¼ˆå®‰å…¨ï¼‰
  - çŠ¶æ€: âœ… æ­£å¸¸

- **é¢æ¿ 2**: è¿‡å» 1 å°æ—¶æ€»è½¬è´¦æ•°
  - å¯èƒ½æ˜¾ç¤º: `0`ï¼ˆåˆšå¯åŠ¨ï¼Œè¿˜æ²¡æœ‰æ•°æ®ï¼‰
  - çŠ¶æ€: â³ ç­‰å¾…æ•°æ®

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: æ‰¾ä¸åˆ° Prometheus æ•°æ®æº

**åŸå› **: Prometheus å®¹å™¨æœªè¿è¡Œ

**è§£å†³æ–¹æ³•**:
```bash
# æ£€æŸ¥ Prometheus å®¹å™¨
docker ps | grep prometheus

# å¦‚æœæ²¡æœ‰è¿è¡Œï¼Œå¯åŠ¨å®ƒ
docker-compose -f docker-compose.infra.yml up -d prometheus
```

### é—®é¢˜ 2: æ•°æ®æºæµ‹è¯•å¤±è´¥

**é”™è¯¯**: "Failed to connect to Prometheus"

**è§£å†³æ–¹æ³•**:
```bash
# æ£€æŸ¥ Prometheus æ˜¯å¦å¯è®¿é—®
curl http://localhost:9090/api/v1/targets

# æœŸæœ›è¾“å‡º: JSON æ ¼å¼çš„ targets ä¿¡æ¯
```

### é—®é¢˜ 3: å¯¼å…¥åæ‰€æœ‰é¢æ¿æ˜¾ç¤º "No Data"

**åŸå› **: Indexer è¿˜æ²¡æœ‰å¤„ç†åˆ° Transfer äº‹ä»¶

**è§£å†³æ–¹æ³•**:
```bash
# 1. ç¡®è®¤ Indexer æ­£åœ¨è¿è¡Œ
docker logs -f web3-debug-app | grep "System Operational"

# 2. ç­‰å¾… 10-15 åˆ†é’Ÿï¼Œè®©ç³»ç»Ÿå¤„ç†ä¸€äº›æ–°çš„åŒºå—

# 3. æŸ¥çœ‹ Prometheus æŒ‡æ ‡
curl http://localhost:8083/metrics | grep indexer_token_transfer

# æœŸæœ›è¾“å‡º:
# indexer_token_transfer_volume_total{symbol="USDC"} 1234.56
```

### é—®é¢˜ 4: æ‰¾ä¸åˆ° JSON æ–‡ä»¶

**è§£å†³æ–¹æ³•**:
```bash
# ç¡®è®¤æ–‡ä»¶å­˜åœ¨
ls -lh /home/ubuntu/zwCode/web3-indexer-go/grafana/Token-Metrics-Dashboard.json

# å¦‚æœä¸å­˜åœ¨ï¼Œä»é¡¹ç›®æ ¹ç›®å½•é‡æ–°æ„å»º
cd /home/ubuntu/zwCode/web3-indexer-go
ls grafana/Token-Metrics-Dashboard.json
```

---

## ğŸ¨ å¯¼å…¥æˆåŠŸåçš„æ“ä½œ

### ä¿®æ”¹åˆ·æ–°é¢‘ç‡

é»˜è®¤ï¼š10 ç§’

1. ç‚¹å‡»é¡¶éƒ¨ **"Refresh interval"** ä¸‹æ‹‰èœå•
2. é€‰æ‹©ï¼š
   - `5s` ï¼ˆæ›´é¢‘ç¹ï¼‰
   - `30s` ï¼ˆæ›´ä¿å®ˆï¼‰
   - `Pause` ï¼ˆæš‚åœåˆ·æ–°ï¼‰

### ä¿®æ”¹æ—¶é—´èŒƒå›´

é»˜è®¤ï¼šè¿‡å» 24 å°æ—¶

1. ç‚¹å‡»å³ä¸Šè§’æ—¶é—´é€‰æ‹©å™¨ï¼ˆå³ä¸Šè§’æ—¶é’Ÿå›¾æ ‡ï¼‰
2. é€‰æ‹©ï¼š
   - `Last 1 hour` ï¼ˆ1 å°æ—¶ï¼‰
   - `Last 6 hours` ï¼ˆ6 å°æ—¶ï¼‰
   - `Custom` ï¼ˆè‡ªå®šä¹‰æ—¶é—´èŒƒå›´ï¼‰

### ä¿å­˜ Dashboard å¿«ç…§

1. ç‚¹å‡»å³ä¸Šè§’ **"Save"** å›¾æ ‡ï¼ˆè½¯ç›˜ï¼‰
2. é€‰æ‹© **"Save Dashboard"**
3. è¾“å…¥å¿«ç…§åç§°ï¼ˆå¯é€‰ï¼‰
4. ç‚¹å‡» **"Save"**

---

## ğŸ“± å…±äº« Dashboard

### å…¬å¼€è®¿é—®é“¾æ¥

1. ç‚¹å‡»é¡¶éƒ¨ **"Share"** å›¾æ ‡
2. åˆ‡æ¢ **"Public dashboard"** å¼€å…³
3. å¤åˆ¶é“¾æ¥åˆ†äº«ï¼š
   ```
   http://localhost:3000/d/token-metrics/web3-token-metrics-dashboard
   ```

### åµŒå…¥åˆ°ç½‘ç«™

```html
<iframe
  src="http://localhost:3000/d/token-metrics/web3-token-metrics-dashboard?orgId=1&refresh=10s&kiosk"
  width="100%"
  height="1000"
  frameborder="0">
</iframe>
```

### å¯¼å‡º Dashboard JSON

1. ç‚¹å‡»é¡¶éƒ¨ **"Share"** å›¾æ ‡
2. ç‚¹å‡» **"Export"** â†’ **"Save to file"**
3. JSON æ–‡ä»¶ä¼šè‡ªåŠ¨ä¸‹è½½

---

## ğŸ“Š é¢„æœŸæ•ˆæœ

### å¯¼å…¥åç«‹å³å¯è§

**RPC é¢åº¦ä»ªè¡¨ç›˜**:
```
ğŸ›¡ï¸ RPC QUOTA GUARD (DAILY)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  0.02%  â”‚  â† ç»¿è‰²ï¼ˆå®‰å…¨ï¼‰
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ€»è½¬è´¦æ•°**:
```
è¿‡å» 1 å°æ—¶æ€»è½¬è´¦æ•°
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚    0    â”‚  â† åˆšå¯åŠ¨
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¿è¡Œ 15-30 åˆ†é’Ÿå

**USDC æµæ°´**:
```
USDC è¿‡å» 1 å°æ—¶æµæ°´
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ $123.4 â”‚  â† å¼€å§‹æ˜¾ç¤ºæ•°æ®
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é¥¼å›¾**:
```
å››å¤§çƒ­é—¨ä»£å¸è½¬è´¦æ¬¡æ•°å æ¯”
     USDC  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 40%
     DAI   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 35%
     WETH  â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ 20%
     UNI   â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘  5%
```

---

## ğŸ¯ å®Œæˆå

### æ£€æŸ¥æ¸…å•

- [ ] Dashboard æˆåŠŸå¯¼å…¥
- [ ] é¢æ¿ 6 æ˜¾ç¤º RPC é¢åº¦ï¼ˆç»¿è‰²ï¼Œä½å€¼ï¼‰
- [ ] æ— é”™è¯¯ä¿¡æ¯ï¼ˆçº¢è‰²æ„Ÿå¹å·ï¼‰
- [ ] åˆ·æ–°é¢‘ç‡è®¾ç½®ä¸º 10 ç§’
- [ ] æ—¶é—´èŒƒå›´è®¾ç½®ä¸º "Last 24 hours"

### ä¸‹ä¸€æ­¥

- âœ… ç­‰å¾… 15 åˆ†é’Ÿï¼Œè§‚å¯Ÿæ•°æ®æ›´æ–°
- âœ… å¦‚æœ‰æ•°æ®ï¼ŒéªŒè¯ä»£å¸ç»Ÿè®¡åŠŸèƒ½
- â³ æˆ–ç»§ç»­ Phase 5ï¼ˆMakefile è‡ªåŠ¨åŒ–ï¼‰

---

## ğŸ’¡ æç¤º

### æœ€ä½³å®è·µ

1. **å…ˆå¯¼å…¥åéªŒè¯**: ç¡®ä¿ RPC é¢åº¦ä»ªè¡¨ç›˜æ­£å¸¸
2. **ç­‰å¾…æ•°æ®**: ç³»ç»Ÿéœ€è¦ 10-15 åˆ†é’Ÿå¤„ç†æ–°çš„åŒºå—
3. **è°ƒæ•´åˆ·æ–°**: æ ¹æ®éœ€è¦è°ƒæ•´åˆ·æ–°é¢‘ç‡
4. **ä¿å­˜å¿«ç…§**: å®šæœŸä¿å­˜ Dashboard é…ç½®

### å¸¸è§é—®é¢˜

**Q: ä¸ºä»€ä¹ˆæ‰€æœ‰é¢æ¿éƒ½æ˜¯ 0ï¼Ÿ**
A: ç³»ç»Ÿåˆšå¯åŠ¨ï¼Œè¿˜æ²¡æœ‰å¤„ç†åˆ° Transfer äº‹ä»¶ã€‚ç­‰å¾… 10-15 åˆ†é’Ÿã€‚

**Q: é¢æ¿æ˜¾ç¤º "No Data" é”™è¯¯ï¼Ÿ**
A: å¯èƒ½æ˜¯ Prometheus æ•°æ®æºé…ç½®é”™è¯¯ã€‚æ£€æŸ¥ URL: `http://prometheus:9090`

**Q: å¦‚ä½•æ›´æ–° Dashboardï¼Ÿ**
A: é‡æ–°ä¸Šä¼  JSON æ–‡ä»¶ï¼Œæˆ–åœ¨ Grafana ä¸­ç›´æ¥ç¼–è¾‘é¢æ¿

---

**å¿«é€Ÿé“¾æ¥**:
- Grafana: http://localhost:3000
- Prometheus: http://localhost:9090
- Indexer Metrics: http://localhost:8083/metrics
- API Status: http://localhost:8083/api/status

**éœ€è¦å¸®åŠ©ï¼Ÿ** æŸ¥çœ‹æ—¥å¿—ï¼š
```bash
docker logs web3-debug-app | grep -E "(Token filtering|Rate limiter|Quota monitor)"
```

---

**æœ€åæ›´æ–°**: 2026-02-16
**ç»´æŠ¤è€…**: Claude Code
