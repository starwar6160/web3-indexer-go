# 十日研发征程（从零到工业级）

### **概览**

本日志记录了 Web3 Indexer 在 10 天内从零仓库演进为具备自愈能力的工业级系统的全过程。每一天的提交都标志着系统从“实现功能”向“高可用架构”的蜕变。

---

### **阶段一：高并发基石 (第 1-2 天)**

* **2月8日：核心流水线设计**
* **任务**：设计 `Fetcher` → `Sequencer` → `Processor` 流水线。
* **解决**：实现 **Worker Pool** 进行并发 RPC 抓取，并通过 **Sequencer（最小堆）** 强制区块顺序，根治高并发下的数据空洞问题。

* **2月9日：实时响应式架构**
* **任务**：集成 WebSocket Hub 与内置模拟器。
* **解决**：引入 **智能休眠系统**，根据活跃连接数动态调整轮询频率，针对 5600U 等受限环境优化资源占用。

### **阶段二：SRE 与可靠性加固 (第 3-5 天)**

* **2月10日：稳定性攻坚 (50+ 提交)**
* **任务**：内置 SRE 级安全网。
* **解决**：实现带指数退避的 **429 熔断器**，并将区块元数据与转账记录封装在 **单条 ACID 事务** 中，杜绝宕机导致的一致性隐患。

* **2月11-12日：安全与身份体系**
* **任务**：EdDSA 身份识别与安全部署。
* **解决**：通过 **Tailscale** 绑定私有网络，并利用 **Cloudflare Tunnel** 实现零公网暴露的防御性部署。

### **阶段三：可观测性与自愈能力 (第 6-8 天)**

* **2月13-14日：监控栈与 CI/CD**
* **任务**：Grafana 集成与质量门禁。
* **解决**：搭建完整的 Prometheus + Grafana 监控栈。配置 **GitHub Actions** 流水线，通过严格的 Lint 与安全检查维持代码高标准。

* **2月15日：高级自愈特性**
* **任务**：冷启动 Teleport 与哈希链修复。
* **解决**：开发 **异步哈希链自愈机制**，自动回溯并修复历史数据缺口，确保数据链路的绝对完整。

### **阶段四：元数据与密码学证明 (第 9 天)**

* **2月16日：安全与元数据加固**
* **任务**：元数据嗅探与 Ed25519 签名。
* **解决**：实现 **异步元数据解析** 自动识别代币符号。引入 **Ed25519 负载签名**，为每一个 API/WS 响应提供可追溯的密码学真实性证明。

### **阶段五：情报引擎与链上意图 (第 10 天)**

* **2月17日：从索引器到情报引擎的进化**
* **任务**：全协议嗅探与多维行为识别。
* **解决**：
    * **全量捕获**：移除 RPC Topic 过滤器，实现对所有智能合约日志的 100% 捕获。
    * **多维识别**：实现对 **Swap (兑换)、Approve (授权)、Mint (铸造) 及 Deploy (部署)** 的自动分类。
    * **交易嗅探**：增加对原始交易的扫描，捕获 **原生 ETH 转账** 与 **合约创建** 行为，提供全方位的链上情报流。

### **阶段六：自动化部署与 SRE 仪表盘 (最终润色)**

* **2月17日（晚）：完成闭环**
* **任务**：自动化部署流水线与经济活动监测。
* **解决**：
    * **Gas 大户排行榜**：实现基于内存的实时 Gas 消耗聚合，识别网络重度占用合约。
    * **自动化部署**：创建 `deploy.sh` 与 `make deploy-stable`，实现版本指纹自动注入与 Cloudflare 缓存自动清理。
    * **UI/UX 精修**：应用 SRE 级专业样式，确保全球边缘节点展现一致的工业化视觉效果。


